_meta:
    kms: projects/constellation-prod-242820/locations/global/keyRings/togglr-key-ring/cryptoKeys/togglr-crypto-key
    name: togglr-api-service
    namespace: togglr
    chart: df/df-service
    version: 1.2.0
version: v1
replicaCount: 3
image:
    registry: us.gcr.io/constellation-prod-242820
    name: togglr-api-service
    tag: latest
    pullPolicy: Always
app:
    listenerPort: 8080
    probes:
        initialDelaySeconds: 60
        periodSeconds: 5
        timeoutSeconds: 3
        liveness:
            endpoint: /togglr-api/actuator/health
        readiness:
            endpoint: /togglr-api/actuator/health
cloudsql:
    enabled: true
    useProxy: true
    #  pg or mysql
    type: mysql
    instance: constellation-prod-242820:us-central1:gcpcsmtogglr
    #  privateIp:
    user_enc: ENC[AES256_GCM,data:d5ttD/m2dzz5LhI+ZbxO,iv:HJpx/rzS4FOcqqMWQHf4IxQPcynsi+/WcgcWSr06/PI=,tag:Mv4BlWgXto/3eucOAqlejQ==,type:str]
    password_enc: ENC[AES256_GCM,data:2UVlqALBTjLZNjszr0+qpg==,iv:EOZnQYUwAf4xFXmZCgMZz94XMofSa3AHi0027vKaCCQ=,tag:9qMxDzx7rtWnz2vQLpy2SA==,type:str]
    database: togglr
    proxyResources:
        limits:
            cpu: 500m
            memory: 500Mi
        requests:
            cpu: 300m
            memory: 300Mi
env:
    staticValues:
        NEW_RELIC_ENVIRONMENT: prod
        SPRING_DATASOURCE_URL: jdbc:mysql://$(SPRING_DATASOURCE_HOST):$(SPRING_DATASOURCE_PORT)/$(SPRING_DATASOURCE_DATABASE)?verifyServerCertificate=false&useSSL=false&requireSSL=false
    secrets:
        HEB_TOGGLR_CLIENT_APP-ID_enc: ENC[AES256_GCM,data:iw==,iv:/U9pB8VP+aqw8bj2xj07vuOpB6P8Gl3cykK0/c/+gV8=,tag:9eEsPeUNkAWxPQBrwj5yag==,type:str]
        SPRING_SECURITY_USER_PASSWORD_enc: ENC[AES256_GCM,data:IYHhwtYYlgRR+wsE,iv:C/kCJvQfuPloy2sao0DSQyTTO/b3+cYU57oIdcDrPP0=,tag:8UoYoRj5xiBgziAFRTu8KA==,type:str]
        SPRING_SECURITY_USER_NAME_enc: ENC[AES256_GCM,data:uHgsBu2Zcw==,iv:R1GGNAq9e9jSUjka6XRIElPqc5NjPrLV3cg6fiZs0tw=,tag:1Npz1thdCArmzLfKbQ1Oxg==,type:str]
    configs:
        HEB_TOGGLR_CLIENT_SERVER-URL: http://localhost:8080/togglr-service/features/active
        SERVER_SERVLET_CONTEXT-PATH: /togglr-api
        SERVER_SERVLET_SESSION_COOKIE_DOMAIN: togglr.df.gcp.heb.com
        SSO_SAML_COOKIE_DOMAIN: togglr.df.gcp.heb.com
        SPRING_PROFILES_ACTIVE: clouddev,mysql
        HEB_TOGGLR_APP-DOMAIN: togglr.df.gcp.heb.com
        HEB_TOGGLR_CACHE-TIME: "15000"
    externalSecrets: null
    externalSecrets:
    -   name: SPRING_DATASOURCE_USERNAME
        secretName: togglr-api-service-cloudsql
        secretKey: CLOUDSQL_USER
    -   name: SPRING_DATASOURCE_PASSWORD
        secretName: togglr-api-service-cloudsql
        secretKey: CLOUDSQL_PASSWORD
    -   name: SPRING_DATASOURCE_HOST
        secretName: togglr-api-service-cloudsql
        secretKey: CLOUDSQL_HOST
    -   name: SPRING_DATASOURCE_PORT
        secretName: togglr-api-service-cloudsql
        secretKey: CLOUDSQL_PORT
    -   name: SPRING_DATASOURCE_DATABASE
        secretName: togglr-api-service-cloudsql
        secretKey: CLOUDSQL_DATABASE
scaler:
    minReplicas: 3
    maxReplicas: 10
    targetMemoryUtilization: 80
    targetCpuUtilization: 80
resources:
    requests:
        cpu: "1"
        memory: 3Gi
    limits:
        cpu: "1"
        memory: 3Gi
sops:
    kms: []
    gcp_kms:
    -   resource_id: projects/constellation-prod-242820/locations/global/keyRings/togglr-key-ring/cryptoKeys/togglr-crypto-key
        created_at: '2019-07-26T20:18:56Z'
        enc: CiQAGQnY+0d6NwHwj7mU9iaAc4hgMqbRy0ImKwTzJU8NMqoDdfYSSQBSikkE9Xi+UnAfTMtAFxxs5fOCSfq9CdOoJnvl9tU0yQ4D0Ti/EKVKb6hNblgJuGo7JyZBq41KsE/9H+cWidQgOp9rZi7IMbo=
    azure_kv: []
    lastmodified: '2019-07-26T20:18:57Z'
    mac: ENC[AES256_GCM,data:jKcprGBT6JnY919T+EX+rL5+9IQgUxY8I85HF2fXonNoa7fSdK5I97+l0ySJvLBzSQeTy9qb6ne7xpLAmiH17mvUuah+wrrROmu7fz8/j+6zuehXseiHfQw4uIessO/FEcNYi0+PJRgel0wQUZdLzxBqJ/ePi8+U032mJnoOKRA=,iv:dw5Ldcp6z/DbYfQQtibgh9WsK7EkDg2HCTnAtHrOrzA=,tag:DJMIKeYgrGS/G1GuLzX5kg==,type:str]
    pgp: []
    encrypted_suffix: enc
    version: 3.3.0
